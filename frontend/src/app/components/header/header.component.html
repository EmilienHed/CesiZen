<!--
<nav class="navbar navbar-expand-lg" [ngClass]="{'scrolled': isScrolled}" role="navigation" aria-label="Navigation principale">
  <div class="container">
    &lt;!&ndash; Brand/Logo &ndash;&gt;
    <a class="navbar-brand" routerLink="/" aria-label="Accueil CESIZen">
      <span class="logo-text">CESI<span class="text-accent">Zen</span></span>
    </a>

    &lt;!&ndash; Mobile Toggle Button &ndash;&gt;
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" [attr.aria-expanded]="isMenuOpen" aria-label="Afficher le menu de navigation"
            (click)="toggleMenu()">
      <span class="navbar-toggler-icon"></span>
    </button>

    &lt;!&ndash; Navigation Links &ndash;&gt;
    <div class="collapse navbar-collapse" id="navbarNav" [ngClass]="{'show': isMenuOpen}">
      &lt;!&ndash; Main Navigation &ndash;&gt;
      <div class="navbar-nav-horizontal" role="menubar">
        <a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
           role="menuitem" aria-current="page">
          <i class="bi bi-house-door" aria-hidden="true"></i> Accueil
        </a>
        <a class="nav-link" routerLink="/respiration" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-lungs" aria-hidden="true"></i> Exercices
        </a>
        <a class="nav-link" routerLink="/articles" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-journal-text" aria-hidden="true"></i> Articles
        </a>
        <a *ngIf="isAdmin" class="nav-link" routerLink="/admin" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-shield-lock" aria-hidden="true"></i> Administration
        </a>
      </div>

      &lt;!&ndash; Auth Section &ndash;&gt;
      <div class="auth-section">
        <ng-container *ngIf="authService.currentUserValue; else loginButtons">
          &lt;!&ndash; Nom de l'utilisateur &ndash;&gt;
          <div class="user-name-display">
            <i class="bi bi-person-circle"></i>
            <span>{{ authService.currentUserValue?.userName || 'Utilisateur' }}</span>
          </div>
          &lt;!&ndash; Bouton de déconnexion &ndash;&gt;
          <button class="btn btn-outline-primary" (click)="logout()" aria-label="Se déconnecter">
            <i class="bi bi-box-arrow-right" aria-hidden="true"></i> Se déconnecter
          </button>
        </ng-container>

        &lt;!&ndash; Login/Register Buttons &ndash;&gt;
        <ng-template #loginButtons>
          <a routerLink="/login" class="btn btn-outline-primary" aria-label="Se connecter">
            <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i> Se connecter
          </a>
          <a routerLink="/inscription" class="btn btn-primary" aria-label="S'inscrire">
            <i class="bi bi-person-plus" aria-hidden="true"></i> S'inscrire
          </a>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
-->


<nav class="navbar navbar-expand-lg" [ngClass]="{'scrolled': isScrolled}" role="navigation" aria-label="Navigation principale">
  <div class="container">
    <!-- Brand/Logo et Navigation principale sur la même ligne -->
    <div class="d-flex align-items-center">
      <!-- Brand/Logo -->
      <a class="navbar-brand" routerLink="/" aria-label="Accueil CESIZen">
        <span class="logo-text">CESI<span class="text-accent">Zen</span></span>
      </a>

      <!-- Navigation Links - Visible sur desktop, masqué sur mobile -->
      <div class="desktop-nav">
        <a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
           role="menuitem" aria-current="page">
          <i class="bi bi-house-door" aria-hidden="true"></i> Accueil
        </a>
        <a class="nav-link" routerLink="/respiration" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-lungs" aria-hidden="true"></i> Exercices
        </a>
        <a class="nav-link" routerLink="/articles" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-journal-text" aria-hidden="true"></i> Articles
        </a>
        <a *ngIf="isAdmin" class="nav-link" routerLink="/admin" routerLinkActive="active"
           role="menuitem">
          <i class="bi bi-shield-lock" aria-hidden="true"></i> Administration
        </a>
      </div>
    </div>

    <!-- Auth Section alignée à droite - Visible sur desktop -->
    <div class="auth-section ms-auto d-none d-lg-flex">
      <ng-container *ngIf="authService.currentUserValue; else loginButtons">
        <!-- Nom de l'utilisateur -->
        <a class="user-name-display" [routerLink]="['/profile']" style="cursor:pointer; text-decoration:none;">
          <i class="bi bi-person-circle"></i>
          <span>
            {{
              authService.currentUserValue?.prenom && authService.currentUserValue?.nom
                ? (authService.currentUserValue?.prenom + ' ' + authService.currentUserValue?.nom)
                : authService.currentUserValue?.firstName && authService.currentUserValue?.lastName
                  ? (authService.currentUserValue?.firstName + ' ' + authService.currentUserValue?.lastName)
                  : authService.currentUserValue?.userName
                    ? authService.currentUserValue?.userName
                    : 'Utilisateur'
            }}
          </span>
        </a>
        <!-- Bouton de déconnexion -->
        <button class="btn btn-outline-primary" (click)="logout()" aria-label="Se déconnecter">
          <i class="bi bi-box-arrow-right" aria-hidden="true"></i> Se déconnecter
        </button>
      </ng-container>

      <!-- Login/Register Buttons -->
      <ng-template #loginButtons>
        <a routerLink="/login" class="btn btn-outline-primary me-2" aria-label="Se connecter">
          <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i> Se connecter
        </a>
        <a routerLink="/inscription" class="btn btn-primary" aria-label="S'inscrire">
          <i class="bi bi-person-plus" aria-hidden="true"></i> S'inscrire
        </a>
      </ng-template>
    </div>

    <!-- Mobile Toggle Button - Visible uniquement sur mobile -->
    <button class="navbar-toggler ms-auto d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" [attr.aria-expanded]="isMenuOpen" aria-label="Afficher le menu de navigation"
            (click)="toggleMenu()">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>

  <!-- Menu mobile - Séparé du conteneur principal -->
  <div class="mobile-nav-container collapse" id="navbarNav" [ngClass]="{'show': isMenuOpen}">
    <div class="mobile-menu-content">
      <!-- Liens de navigation mobile -->
      <div class="mobile-nav-links">
        <a class="mobile-nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
           role="menuitem" (click)="toggleMenu()">
          <i class="bi bi-house-door" aria-hidden="true"></i> Accueil
        </a>
        <a class="mobile-nav-link" routerLink="/respiration" routerLinkActive="active"
           role="menuitem" (click)="toggleMenu()">
          <i class="bi bi-lungs" aria-hidden="true"></i> Exercices
        </a>
        <a class="mobile-nav-link" routerLink="/articles" routerLinkActive="active"
           role="menuitem" (click)="toggleMenu()">
          <i class="bi bi-journal-text" aria-hidden="true"></i> Articles
        </a>
        <a *ngIf="isAdmin" class="mobile-nav-link" routerLink="/admin" routerLinkActive="active"
           role="menuitem" (click)="toggleMenu()">
          <i class="bi bi-shield-lock" aria-hidden="true"></i> Administration
        </a>
      </div>

      <!-- Section d'authentification mobile -->
      <div class="mobile-auth-section">
        <ng-container *ngIf="authService.currentUserValue; else mobileLoginButtons">
          <a class="mobile-user-info" [routerLink]="['/profile']" (click)="toggleMenu()" style="cursor:pointer; text-decoration:none;">
            <i class="bi bi-person-circle"></i>
            <span>
              {{
                authService.currentUserValue?.prenom && authService.currentUserValue?.nom
                  ? (authService.currentUserValue?.prenom + ' ' + authService.currentUserValue?.nom)
                  : authService.currentUserValue?.firstName && authService.currentUserValue?.lastName
                    ? (authService.currentUserValue?.firstName + ' ' + authService.currentUserValue?.lastName)
                    : authService.currentUserValue?.userName
                      ? authService.currentUserValue?.userName
                      : 'Utilisateur'
              }}
            </span>
          </a>
          <button class="btn btn-outline-primary" (click)="logout(); toggleMenu()" aria-label="Se déconnecter">
            <i class="bi bi-box-arrow-right" aria-hidden="true"></i> Se déconnecter
          </button>
        </ng-container>

        <ng-template #mobileLoginButtons>
          <a routerLink="/login" class="btn btn-outline-primary" (click)="toggleMenu()" aria-label="Se connecter">
            <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i> Se connecter
          </a>
          <a routerLink="/inscription" class="btn btn-primary" (click)="toggleMenu()" aria-label="S'inscrire">
            <i class="bi bi-person-plus" aria-hidden="true"></i> S'inscrire
          </a>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
